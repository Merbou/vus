(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{341:function(e,t,r){"use strict";r.r(t);var n=r(11),a=r.n(n),o=r(72),i=r(4),c=(r(328),r(20)),s=r(5);function l(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,a)}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f={name:"confirmation",components:{LangSelect:o.a,ValidationObserver:i.a,ValidationProvider:i.b},data:function(){return{form:{code:""},BackErrors:{code:""},loading:!1}},mounted:function(){this.sendMail(!1)},computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},Object(s.b)(["user","dark"])),methods:{confirmation:function(){var e=this;this.loading=!0,this.vLoading(!0);var t=this.user.id;Object(c.confirm)(t,this.form.code).then((function(t){e.loading=!1,e.vLoading(!1),e.$store.dispatch("mailVerifed",t).then((function(){e.snackbar({text:e.$i18n.t("_mail.success"),color:"success"}),e.$router.push({path:"/dashboard"}).catch((function(e){}))}))})).catch((function(t){e.loading=!1,e.vLoading(!1),t&&422==t.status?Object.assign(e.BackErrors,t.data.errors):t&&t.status}))},sendMail:function(e){var t=this,r=this.user.id;this.loading=!0,Object(c.send)(r,e).then((function(e){t.loading=!1})).catch((function(e){t.loading=!1}))},validate:function(){var e,t=this;return(e=a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$refs.form.validate();case 2:if(!e.sent){e.next=7;break}t.confirmation(),e.next=8;break;case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){l(o,n,a,i,c,"next",e)}function c(e){l(o,n,a,i,c,"throw",e)}i(void 0)}))})()},errorRender:function(e,t){return e.length>0?e:t?t[0]:void 0}}},v=r(1),b=Object(v.a)(f,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("ValidationObserver",{ref:"form",staticClass:"container",attrs:{autocomplete:"on"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.validate(t)}}},[r("v-card",{staticClass:"mx-auto",attrs:{"max-width":"400",loading:e.loading,disabled:e.loading,shaped:"",elevation:"10"}},[r("v-card-title",[r("v-layout",{attrs:{"align-center":"","justify-space-between":"","fill-height":""}},[r("div",[r("lang-select",{attrs:{is_white:!e.dark}})],1),e._v(" "),r("div",[e._v(e._s(e.$t("_mail.title")))])])],1),e._v(" "),r("v-card-text",[r("v-layout",{attrs:{wrap:""}},[r("v-flex",{attrs:{xs12:"",md12:"",lg12:"",sm12:""}},[r("ValidationProvider",{attrs:{name:e.$tc("label.code"),rules:"integer|required"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return r("v-text-field",{attrs:{loading:e.loading,outlined:"",autocomplete:"on",solo:"",rounded:"","single-line":"","error-messages":e.errorRender(n,e.BackErrors.code),label:e.$tc("label.code"),required:""},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",e._n(t))},expression:"form.code"}})}}])})],1)],1)],1),e._v(" "),r("v-card-actions",{staticClass:"d-flex justify-space-between"},[r("v-btn",{attrs:{text:"",small:""},on:{click:function(t){return e.sendMail(!0)}}},[e._v(e._s(e.$t("_mail.resend")))]),e._v(" "),r("v-btn",{staticClass:"ma-2",attrs:{color:"success",dark:"",rounded:""},on:{click:e.validate}},[e._v(e._s(e.$t("_mail.submit")))])],1)],1)],1)],1)}),[],!1,null,null,null);t.default=b.exports}}]);