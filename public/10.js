(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{343:function(t,e,n){"use strict";n.r(e);var a=n(242),o=n(327),c=n(17),i=n(70),s=n(5);function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var u={components:{materielTable:o.a,dialogContact:a.default},data:function(){return{headers:[{text:this.$i18n.tc("label.email"),align:"left",value:"email"},{text:this.$i18n.tc("label.subject"),value:"subject"},{text:this.$i18n.tc("label.created_at"),value:"created_at"},{text:this.$i18n.t("_contact.read"),value:"view"},{text:this.$i18n.tc("label.actions"),value:"actions",sortable:!1}],modulePath:"contact/index.js",res_server_side:{},item:{},showContent:!1,selected:[]}},mounted:function(){this.initDialog()},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(s.b)(["dialog"]),{value:function(){return this.dialog.value}}),methods:{readContact:function(t){t.view=1,Object(c.readContactApi)(t.id).then((function(t){})).catch((function(e){t.view=0}))},readItem:function(t,e){this.readContact(t),this.item=t,this.showContent=!0},closeDialog:function(){this.showContent=!1},ShowDeleteItem:function(t){this.selected=t,this.$store.dispatch("toggleDialog",{open:!0,value:!1})},deleteItems:function(){var t=this,e=this.selected.map((function(t){return t.id}));this.dialogDelete=!1,this.Removeitems(),this.vLoading(!0),Object(c.deleteContactsApi)(e).then((function(e){t.vLoading(!1),t.snackbar({text:t.$i18n.t("alert.complete"),color:"success"}),t.selected=[],t.setSelected([])})).catch((function(e){t.vLoading(!1),t.snackbar({text:t.$i18n.t("alert.failed"),color:"error"}),t.getData().push(t.selected)}))},Removeitems:function(){var t=this;this.selected.forEach((function(e){var n=t.getData().indexOf(e);n>-1&&t.getData().splice(n,1)}))},globalSearchContact:function(t){var e=this,n=t.query,a=t.page;Object(i.globalSearchContactApi)({c_query:n},a).then((function(t){var n=t.contacts;e.res_server_side=n})).catch((function(t){console.log(t)}))},getData:function(){return this.$refs.table.getData()},setSelected:function(t){this.$refs.table.setSelected(t)},initDialog:function(){this.$store.dispatch("initDialog",{title:this.$i18n.t("asker.title"),message:this.$i18n.t("asker.message",{obj:"contact",opt:"delete"}),accepte:this.$i18n.t("qst.accepte"),cancel:this.$i18n.t("qst.cancel")})}},watch:{value:function(t){t&&this.deleteItems()}}},f=n(1),d=Object(f.a)(u,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("dialog-contact",{attrs:{dialog:t.showContent,item:t.item},on:{close:t.closeDialog}}),t._v(" "),n("materiel-table",{ref:"table",attrs:{headers:t.headers,modulePath:t.modulePath,select:!0,searched:t.res_server_side},on:{globalSearch:t.globalSearchContact},scopedSlots:t._u([{key:"top",fn:function(e){var a=e.selected;return[n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[n("v-icon",t._g({staticClass:"mx-4 mt-4",attrs:{color:"error",disabled:!(a&&a.length>0),depressed:""},on:{click:function(e){return t.ShowDeleteItem(a)}}},o),[t._v("fas fa-trash")])]}}],null,!0)},[t._v(" "),n("span",[t._v(t._s(t.$tc("tooltip.delete")))])])]}},{key:"actions",fn:function(e){var a=e.item;return[n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[n("v-icon",t._g({staticClass:"mx-2 mx-2",attrs:{small:""},on:{click:function(e){return t.ShowDeleteItem([a])}}},o),[t._v("fas fa-trash")])]}}],null,!0)},[t._v(" "),n("span",[t._v(t._s(t.$t("tooltip.delete",{obj:t.$tc("label.contact",1)})))])])]}},{key:"view",fn:function(e){var a=e.item;return[n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[a.view?n("v-icon",t._g({staticClass:"mx-2",attrs:{small:""},on:{click:function(e){return t.readItem(a,!0)}}},o),[t._v("fas fa-envelope-open")]):n("v-icon",t._g({staticClass:"mx-2",attrs:{small:""},on:{click:function(e){return t.readItem(a,!1)}}},o),[t._v("fas fa-envelope")])]}}],null,!0)},[t._v(" "),n("span",[t._v(t._s(t.$t("tooltip.read",{obj:t.$tc("label.contact",1)})))])])]}}])})],1)}),[],!1,null,null,null);e.default=d.exports}}]);