(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{336:function(e,t,r){"use strict";r.r(t);var n=r(11),a=r.n(n),o=r(327),c=r(5);function i(e,t,r,n,a,o,c){try{var i=e[o](c),s=i.value}catch(e){return void r(e)}i.done?t(s):Promise.resolve(s).then(n,a)}function s(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h={name:"materielTrash",components:{materielTable:o.a},props:{headers:{type:Array,required:!0},modulePath:{type:String,required:!0}},data:function(){return{item:{},option:"",apiFunctions:{},apiSearchs:{},moduleName:"",selected:[],res_server_side:{}}},mounted:function(){this.renderApiFunctions(),this.initDialog()},computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},Object(c.b)(["dialog"]),{restraint:function(){return this.dialog.value},__headers:function(){var e=[{text:this.$i18n.tc("tooltip.recycle"),value:"recycle"},{text:this.$i18n.tc("tooltip.delete"),value:"delete",sortable:!1}];return[].concat(s(this.headers),e)}}),methods:{renderApiFunctions:function(){var e,t=this;return(e=a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.moduleName=(n=t.modulePath,a=void 0,o=void 0,a=n.split(new RegExp("\\/|\\.")),o=a[a.length-2],o.replace(/^\w/,(function(e){return e.toUpperCase()}))).toLowerCase(),e.next=3,r(239)("./"+t.modulePath);case 3:return t.apiFunctions=e.sent,e.next=6,r(378)("./"+t.moduleName+"/search");case 6:t.apiSearchs=e.sent;case 7:case"end":return e.stop()}var n,a,o}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function c(e){i(o,n,a,c,s,"next",e)}function s(e){i(o,n,a,c,s,"throw",e)}c(void 0)}))})()},ShowItem:function(e,t){this.selected=e,this.option=t,this.ShowItemDialog()},ShowItemDialog:function(){this.$store.dispatch("toggleDialog",{message:this.$i18n.t("asker.message",{obj:this.$i18n.tc("label.".concat(this.moduleName),1),opt:this.$i18n.tc("tooltip.".concat(this.option))}),open:!0,value:!1})},handleItems:function(e){var t=this;this.vLoading(!0);var r=this.selected.map((function(e){return e.id}));this.Removeitems(),e(r).then((function(e){t.vLoading(!1),t.snackbar({text:t.$i18n.t("alert.complete"),color:"success"}),t.selected=[],t.setSelected([])})).catch((function(e){t.vLoading(!1),t.snackbar({text:t.$i18n.t("alert.failed"),color:"error"}),t.getData().push(t.selected)}))},globalSearchModel:function(e){var t=this,r=e.query,n=e.page,a={};a["".concat(this.moduleName[0],"_query")]=r,(0,this.apiSearchs["trashGlobalSearch".concat(this.moduleName.replace(/^\w/,(function(e){return e.toUpperCase()})),"Api")])(a,n).then((function(e){t.res_server_side=e["".concat(t.moduleName,"s")]})).catch((function(e){console.log(e)}))},Removeitems:function(){var e=this;this.selected.forEach((function(t){var r=e.getData().indexOf(t);r>-1&&e.getData().splice(r,1)}))},getData:function(){return this.$refs.table.getData()},setSelected:function(e){this.$refs.table.setSelected(e)},initDialog:function(){this.$store.dispatch("initDialog",{title:this.$i18n.t("asker.title"),accepte:this.$i18n.t("qst.accepte"),cancel:this.$i18n.t("qst.cancel")})}},watch:{restraint:function(e){var t=this.apiFunctions[this.option+this.moduleName.replace(/^\w/,(function(e){return e.toUpperCase()}))+"sApi"];e&&this.handleItems(t)}}},d=r(1),f={components:{materielTrash:Object(d.a)(h,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("materiel-table",{ref:"table",attrs:{headers:e.__headers,modulePath:e.modulePath,searched:e.res_server_side,select:!0},on:{globalSearch:e.globalSearchModel},scopedSlots:e._u([{key:"top",fn:function(t){var n=t.selected;return[r("v-tooltip",{directives:[{name:"can",rawName:"v-can",value:"@delete from trash",expression:"'@delete from trash'"}],attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-icon",e._g({directives:[{name:"can",rawName:"v-can",value:"@delete from trash",expression:"'@delete from trash'"}],staticClass:"mx-4 mt-4",attrs:{color:"error",disabled:!(n&&n.length>0),depressed:""},on:{click:function(t){return e.ShowItem(n,"delete")}}},a),[e._v("fas fa-trash")])]}}],null,!0)},[e._v(" "),r("span",[e._v(e._s(e.$tc("tooltip.delete")))])]),e._v(" "),r("v-tooltip",{directives:[{name:"can",rawName:"v-can",value:"@recycle from trash",expression:"'@recycle from trash'"}],attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-icon",e._g({directives:[{name:"can",rawName:"v-can",value:"@recycle from trash",expression:"'@recycle from trash'"}],staticClass:"mx-4 mt-4",attrs:{color:"success",disabled:!(n&&n.length>0),depressed:""},on:{click:function(t){return e.ShowItem(n,"recycle")}}},a),[e._v("fas fa-recycle")])]}}],null,!0)},[e._v(" "),r("span",[e._v(e._s(e.$tc("tooltip.recycle")))])])]}},{key:"delete",fn:function(t){var n=t.item;return[r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-icon",e._g({staticClass:"mx-2 mx-2",attrs:{small:""},on:{click:function(t){return e.ShowItem([n],"delete")}}},a),[e._v("fas fa-trash")])]}}],null,!0)},[e._v(" "),r("span",[e._v(e._s(e.$t("tooltip.delete",{obj:e.$tc("label."+e.moduleName,1)})))])])]}},{key:"recycle",fn:function(t){var n=t.item;return[r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-icon",e._g({staticClass:"mx-2 mx-2",attrs:{small:""},on:{click:function(t){return e.ShowItem([n],"recycle")}}},a),[e._v("fas fa-recycle")])]}}],null,!0)},[e._v(" "),r("span",[e._v(e._s(e.$t("tooltip.recycle",{obj:e.$tc("label."+e.moduleName,1)})))])])]}}])})],1)}),[],!1,null,null,null).exports},data:function(){return{tab:null,headers:[{text:this.$i18n.tc("label.email"),align:"left",value:"email"},{text:this.$i18n.tc("label.subject"),value:"subject"},{text:this.$i18n.tc("label.created_at"),value:"created_at"}],modulePath:"trash/contact.js"}}},m=Object(d.a)(f,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-tabs",{attrs:{"background-color":"info",centered:"",dark:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[r("v-tabs-slider"),e._v(" "),r("v-tab",{attrs:{href:"#tab-1"}},[e._v(e._s(e.$t("_trash.tab_1")))]),e._v(" "),r("v-tabs-items",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[r("v-tab-item",{attrs:{value:"tab-1"}},[r("materiel-trash",{attrs:{headers:e.headers,modulePath:e.modulePath}})],1)],1)],1)}),[],!1,null,null,null);t.default=m.exports},378:function(e,t,r){var n={"./contact/search":[70,0],"./user/search":[16,0]};function a(e){if(!r.o(n,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],a=t[0];return r.e(t[1]).then((function(){return r(a)}))}a.keys=function(){return Object.keys(n)},a.id=378,e.exports=a}}]);